inputs:
  # Utility for devenv scripts
  mk-shell-bin:
    url: github:rrbutani/nix-mk-shell-bin
  # The star of the show: provides ROS packages
  nix-ros-overlay:
    url: github:lopsided98/nix-ros-overlay/master # Or 'develop' for bleeding edge
  # For potential container builds (optional for dev)
  nix2container:
    url: github:nlewo/nix2container
    inputs:
      nixpkgs:
        follows: nixpkgs # Ensures nix2container uses the same nixpkgs
  # Essential for running GUI apps like RViz/Gazebo outside NixOS
  nixgl:
    url: github:nix-community/nixGL/main
  # The base Nix package set - CRUCIAL: Must follow nix-ros-overlay's version!
  nixpkgs:
    follows: nix-ros-overlay/nixpkgs
# Allow non-free packages if needed (e.g., some drivers, CUDA)
allowUnfree: true

# nixpkgs configuration for CUDA support (devenv 1.7+)
nixpkgs:
  config:
    allowUnfree: true
  x86_64-linux:
    cudaSupport: true
    cudaCapabilities: ["8.6"]  # Adjust for your GPU (8.6=RTX 3000, 8.9=RTX 4000)
